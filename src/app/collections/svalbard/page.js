'use client';
import '@/app/page.css';
import './page.css';
import '@/app/globals.css';
import GalleryImage from '@/app/components/GalleryImage';
import GallerySkeleton from '@/app/components/GallerySkeleton';
import ImageDetailView from '@/app/components/ImageDetailView';
import { useNavHeight } from '@/app/contexts/NavHeightContext';
import { useEffect, useState, useRef } from 'react';
import { motion, useScroll, useTransform, useMotionTemplate, AnimatePresence } from 'framer-motion';
import { useSearchParams } from 'next/navigation';
import { useResponsiveIconScale } from '@/utils/useResponsiveIconScale';
import svalbardPhotosData from './svalbard.json';
import Label from '@/app/components/Label';

export const dynamic = 'force-static';

function shuffleArray(array) {
  const shuffled = [...array];
  for (let i = shuffled.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
  }
  return shuffled;
}

export default function SvalbardGallery() {
  const [svalbardPhotos] = useState(() => shuffleArray(svalbardPhotosData)); // Shuffle once on mount
  const [visiblePhotos, setVisiblePhotos] = useState([]); // Keeping track of visible photos on the grid
  const [loadedImages, setLoadedImages] = useState(new Set()); // Keeping track of which images have loaded during a batch load
  const [failedImages, setFailedImages] = useState(new Set());
  const [loading, setLoading] = useState(false); // Boolean that's true while images are loading
  const [hasMore, setHasMore] = useState(true); // Boolean that's true if there are more images to load
  const [hasReturnedToGallery, setHasReturnedToGallery] = useState(false);
  const [wasImageOpen, setWasImageOpen] = useState(false);
  const [photosPerPage, setPhotosPerPage] = useState(30);
  const observerRef = useRef(); // Reference for the intersection observer
  const searchParams = useSearchParams();
  const selectedPhotoId = searchParams.get('photo');
  const { navHeight } = useNavHeight();
  const { scrollY } = useScroll();
  const [scrollMapOpacity, setScrollMapOpacity] = useState([0, 400]);
  const [scrollMapBlur, setScrollMapBlur] = useState([150, 400]);
  const [isMobile, setIsMobile] = useState(false);
  const [firstLoad, setFirstLoad] = useState(true);

  useEffect(() => {
    const timeout = setTimeout(() => setFirstLoad(false), 400); // after 1.5s, consider it "loaded"
    return () => clearTimeout(timeout);
  }, []);

  useResponsiveIconScale('.icons', failedImages);

  // Change batch size based on vw
  useEffect(() => {
    const updatePhotosPerPage = () => {
      const width = window.innerWidth;
      if (width < 850) {
        setPhotosPerPage(10);
        setScrollMapOpacity([0, 200]);
        setScrollMapBlur([100, 200]);
      } else if (width > 2000) {
        setPhotosPerPage(40);
        setScrollMapOpacity([0, 600]);
        setScrollMapBlur([200, 600]);
      } else {
        setPhotosPerPage(30);
        setScrollMapOpacity([0, 400]);
        setScrollMapBlur([150, 400]);
      }
    };

    updatePhotosPerPage();
    window.addEventListener('resize', updatePhotosPerPage);
    return () => window.removeEventListener('resize', updatePhotosPerPage);
  }, []);

  useEffect(() => {
    const handleResize = () => setIsMobile(window.innerWidth < 600);

    // Run on mount
    handleResize();

    window.addEventListener('resize', handleResize);
    return () => window.removeEventListener('resize', handleResize);
  }, []);

  // Load initial batch on mount
  useEffect(() => {
    loadNextBatch(svalbardPhotos, []);
  }, []);

  // Set some states used for managing z-index of opened photos
  useEffect(() => {
    if (selectedPhotoId) {
      setWasImageOpen(true);
    } else if (wasImageOpen) {
      // Image was open and now closed (via any method)
      setHasReturnedToGallery(true);
      setWasImageOpen(false);
    }
  }, [selectedPhotoId, wasImageOpen]);

  // Prevent scrolling while image overlay is open
  useEffect(() => {
    document.body.style.overflow = selectedPhotoId ? 'hidden' : '';
    return () => {
      document.body.style.overflow = '';
    };
  }, [selectedPhotoId]);

  // Resetting the higher z-index of the last opened image after return animation has finished
  useEffect(() => {
    if (hasReturnedToGallery) {
      const timeout = setTimeout(() => {
        setHasReturnedToGallery(false);

        // Remove elevated class from all buttons
        document.querySelectorAll('.elevated').forEach(div => {
          div.classList.remove('elevated');
        });
      }, 300);

      return () => clearTimeout(timeout);
    }
  }, [hasReturnedToGallery]);

  // Load next batch of photos
  const loadNextBatch = (photoList, currentVisible) => {
    if (loading) return;

    setLoading(true);

    // Get next batch, ensuring no duplicates
    const nextPhotos = photoList
      .slice(currentVisible.length, currentVisible.length + photosPerPage)
      .filter(id => !currentVisible.includes(id));

    if (nextPhotos.length === 0) {
      setHasMore(false);
      setLoading(false);
      return;
    }

    // Add photos to visible list immediately (will show as skeletons)
    const newVisible = [...currentVisible, ...nextPhotos];
    setVisiblePhotos(newVisible);

    // Preload images
    let loadedCount = 0;
    nextPhotos.forEach(id => {
      if (loadedImages.has(id)) {
        loadedCount++;
        if (loadedCount === nextPhotos.length) {
          setLoading(false);
          setHasMore(newVisible.length < photoList.length);
        }
      } else {
        const img = new Image();
        img.onload = () => {
          setLoadedImages(prev => new Set([...prev, id]));
          loadedCount++;
          if (loadedCount === nextPhotos.length) {
            setLoading(false);
            setHasMore(newVisible.length < photoList.length);
          }
        };
        img.src = `/api/photos/${id}/small`;
        img.onerror = () => {
          console.warn(`Image failed to load: ${id}`);
          setFailedImages(prev => new Set([...prev, id]));
          loadedCount++;
          if (loadedCount === nextPhotos.length) {
            setLoading(false);
            setHasMore(newVisible.length < photoList.length);
          }
        };
      }
    });
  };

  // Intersection observer for infinite scroll
  useEffect(() => {
    if (!hasMore || loading) return;

    const observer = new IntersectionObserver((entries) => {
      if (entries[0].isIntersecting) {
        loadNextBatch(svalbardPhotos, visiblePhotos);
      }
    });

    if (observerRef.current) {
      observer.observe(observerRef.current);
    }

    return () => observer.disconnect();
  }, [hasMore, loading, visiblePhotos]);

  // Reload unloaded images
  const retryUnloadedImages = () => {
    const unloaded = visiblePhotos.filter(id => !loadedImages.has(id));

    if (unloaded.length === 0) return;

    let loadedCount = 0;
    setLoading(true);

    unloaded.forEach(id => {
      setFailedImages(prev => {
        const newSet = new Set(prev);
        newSet.delete(id);
        return newSet;
      });
      const img = new Image();
      img.onload = () => {
        setLoadedImages(prev => new Set([...prev, id]));
        loadedCount++;
        if (loadedCount === unloaded.length) setLoading(false);
      };
      img.onerror = () => {
        console.warn(`Retry failed for image ${id}`);
        loadedCount++;
        if (loadedCount === unloaded.length) setLoading(false);
        setFailedImages(prev => new Set([...prev, id]));
      };
      img.src = `/api/photos/${id}/small`;
    });
  };

  const opacity = useTransform(scrollY, scrollMapOpacity, [1, 0]);
  const blurAmount = useTransform(scrollY, scrollMapBlur, [0, 30]); // renamed from 'blur'
  const filter = useMotionTemplate`blur(${blurAmount}px)`;    // use new name
  const y = useTransform(scrollY, [0, 400], [0, -150]); // parallax

  return (
    <>
      <AnimatePresence mode="wait">
        <motion.div
          key="gallery"
          className="gallery-page-container"
          style={{ marginTop: !selectedPhotoId ? 0 : navHeight }}
          initial={{ opacity: 0 }}
          animate={{ opacity: 1 }}
          exit={{ opacity: 0 }}
          transition={{
              duration: 1,
              delay: firstLoad ? 1 : 0,
            }}
        >
          <motion.div
            style={{ opacity, filter, y, position: 'fixed', width: isMobile ? '100%' : '', left: isMobile ? '0' : '' }}
            initial={{ opacity: 0 }}
            animate={{ opacity: 1 }}
            exit={{ opacity: 0 }}
            transition={{ duration: 1 }}
          >
            <div style={{ width: '100%', padding: '0 1rem', display: 'flex', flexDirection: 'column', marginBottom: '2rem', transition: '.2s', opacity: selectedPhotoId ? '0' : '1' }}>
              {isMobile ? (
                <div className='title-card-mobile standard-border standard-blur'>
                  <div className='collection-title-and-name-container'>
                    <svg className='collection-title-svg' xmlns="http://www.w3.org/2000/svg" width="200" height="265" viewBox="0 0 200 265" fill="none">
                      <defs>
                        <linearGradient id="blueGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                          <stop offset="0%" stopColor="rgba(0, 50, 77, 1)" />
                          <stop offset="35%" stopColor="rgba(0, 111, 196, 1)" />
                          <stop offset="100%" stopColor="rgba(176, 229, 255, 1)" />
                        </linearGradient>
                      </defs>
                      <path d="M74.8315 262.216C74.6947 260.695 75.3048 255.414 79.603 258.29C80.7848 259.08 80.8672 263.014 80.1509 264.373C79.3489 265.893 74.9684 263.737 74.8315 262.216ZM152.302 195.6C152.941 194.49 154.235 195.338 153.74 196.253C152.21 199.085 151.42 201.836 150.48 205.828C150.302 206.557 148.39 204.583 148.71 203.758C149.863 200.095 150.857 198.111 152.302 195.6ZM50.9331 202.929C52.2545 202.484 53.9264 204.884 52.145 205.816C51.2988 206.355 49.7813 203.337 50.9331 202.929ZM57.0503 35.3208C59.9408 28.8826 62.7307 35.1052 62.7993 39.0933C63.7702 42.5518 64.5999 41.2696 65.4282 39.9556C65.2756 38.9452 64.7856 37.7141 66.3042 37.8003C69.8096 38.5841 70.2608 40.4132 70.4663 42.3267C70.6012 43.5096 71.3628 44.446 72.2183 45.3452C74.8728 47.6142 73.6989 50.0545 73.313 52.4595C73.2233 53.7643 70.6765 56.0201 68.9331 57.6333C70.6345 58.0067 70.7699 59.2211 70.9038 60.436C70.6362 61.7536 70.4214 63.1232 69.5894 63.8853C68.2024 65.7534 69.699 67.065 71.1226 66.0415C73.9352 63.9083 73.3863 60.4875 73.7515 57.4175C74.0296 52.7043 74.9398 54.1923 76.5991 55.9087C79.4922 57.6583 80.2894 60.1453 81.1987 62.5923C82.216 64.8611 82.0775 66.4298 81.1987 67.5503L78.7896 70.5688C77.5188 71.845 78.172 72.5229 79.6655 72.9399C80.3956 75.7685 81.1259 75.7638 81.856 74.8804C82.3532 74.2172 82.8567 73.5586 84.9224 74.0181C86.2777 74.3173 85.7653 76.0254 87.3315 75.5269C89.2065 72.3704 88.7795 73.5712 88.8647 73.8022C88.1516 87.3425 98.2809 89.6359 103.979 91.48C107.302 91.682 107.099 94.1155 106.388 96.8696C105.836 98.1199 105.176 99.1935 103.759 99.0259C102.372 98.3408 100.547 100.137 99.5981 99.4565C98.5858 98.8676 97.6898 98.9691 96.9692 100.103C97.2239 102.006 95.5197 101.982 93.4653 101.613C92.1683 101.503 91.3357 102.308 90.6177 103.337C89.9831 104.149 86.6846 102.49 87.9888 105.924C89.788 107.718 87.5867 109.463 86.894 110.667C86.9821 113.256 85.319 113.138 83.3892 112.607C82.0563 112.073 82.0241 113.002 82.7319 114.763C83.2827 115.697 83.6238 116.632 82.7319 117.566C81.8557 119.161 82.4016 120.197 82.9507 121.231C84.0088 122.956 81.826 124.896 81.856 126.405C82.8386 128.912 81.4383 130.14 79.2271 130.932C76.8653 131.59 75.2061 132.181 75.7231 134.597C75.79 136.349 74.3202 137.971 75.2847 139.986C76.729 141.888 76.1444 143.542 75.2847 145.161C74.6059 146.813 74.5201 148.466 74.4087 150.119C74.0195 155.956 71.9498 157.935 68.0562 155.724C66.1879 154.346 63.9965 164.835 63.4565 172.324C63.5737 173.804 62.885 174.492 62.1421 175.126C61.9179 175.784 61.1617 176.354 62.5806 177.282C63.5605 179.807 59.0269 175.666 59.2954 176.635C60.6884 179.566 63.5133 182.654 59.9517 185.043C58.5898 185.668 57.6669 187.157 56.8853 188.923C56.6492 189.939 53.6188 188.825 57.105 191.942C60.4671 195.194 58.4696 196.124 56.8853 197.978C55.9735 201.106 54.1369 201.504 52.0669 201.212C51.5702 199.847 52.6721 196.973 51.8481 197.116C50.9423 197.877 50.5139 198.57 50.314 200.565C49.3648 202.505 47.3205 200.888 48.7808 198.625C50.7798 197.151 49.9463 195.424 48.7808 193.667C47.0638 192.591 45.3297 191.549 44.1812 189.355C43.8331 188.581 43.7494 187.005 42.854 187.613C42.888 187.067 42.9435 186.502 42.1245 186.656L41.5532 185.906C38.9679 182.85 43.5376 183.08 44.8384 181.809C46.4671 180.502 47.9523 179.974 49.0005 181.809C50.3465 184.028 51.1281 180.878 52.0669 179.222C52.4599 178.615 48.1275 179.479 47.4673 177.282C46.3417 174.369 45.3914 177.719 45.0571 179.654C45.1514 180.459 40.5483 179.206 39.3628 180.947C38.8919 181.39 38.3057 177.972 36.7339 176.851C37.394 173.436 34.3207 169.165 32.5728 169.737C30.7411 170.037 28.9328 168.89 28.8491 168.012C28.7598 166.42 28.8147 164.799 27.3159 163.485C26.8127 162.193 26.8697 161.04 27.5347 160.036C26.7172 158.455 26.389 156.873 27.3159 155.292C26.2141 151.874 28.8226 151.196 32.353 151.197C33.4315 151.552 33.3813 152.573 33.0103 153.784C32.9603 155.69 35.87 155.264 36.2964 153.137C37.8554 150.904 44.4723 154.007 48.562 157.017C50.7721 158.604 51.9851 158.053 50.0952 155.832C48.0864 153.131 45.0131 150.811 39.8003 149.256C38.7052 149.045 37.6102 149.108 36.5151 149.472C36.63 148.027 36.9293 146.544 35.6392 145.375C33.9277 143.722 35.8337 142.979 36.5151 143.867C37.3037 146.295 39.3214 144.561 41.3335 144.513C45.4018 144.761 49.0156 144.113 52.5044 143.22C55.0998 140.753 57.9448 141.714 60.8286 143.22C59.1007 141.559 56.481 140.211 58.6382 137.184C54.5315 138.288 50.5555 138.94 47.0288 138.046C44.2485 136.548 42.7295 137.177 41.9907 139.124C41.0213 140.592 37.4046 141.607 29.7251 141.926C28.8782 144.47 27.4127 143.363 26.0015 142.574C25.5634 141.783 25.8554 140.849 26.8774 139.771C27.9284 138.037 27.3237 136.845 26.6587 135.674C25.6994 134.758 25.0722 133.712 25.563 132.225C25.9725 128.667 26.617 127.184 27.3159 126.189C28.4891 125.522 30.4863 124.952 30.3823 125.973C30.2428 127.925 31.5031 129.326 32.7915 130.716C31.9788 126.65 32.8761 124.94 34.9819 124.895L39.1431 125.111C42.4856 122.382 44.0722 117.934 46.3716 120.369C48.9144 120.972 46.792 117.681 47.9048 116.918C48.7542 115.527 50.7166 113.075 51.8481 114.117C52.7241 115.026 53.6001 115.002 54.4761 113.901C55.231 113.082 55.8342 113.759 56.4478 114.332C58.5386 116.812 60.7875 114.788 63.019 113.254C65.6475 110.739 65.2819 110.308 61.9233 111.96C60.6564 112.75 59.4712 113.164 58.6382 111.96C58.2205 110.689 57.8189 109.404 54.6948 110.236C53.9537 109.917 58.586 104.004 60.6089 100.965C63.1602 97.5267 56.8613 97.3389 56.8853 99.8882C56.2056 102.536 55.4096 105.126 52.7241 106.787C50.7712 107.955 48.6869 108.48 46.5903 108.942C44.4968 108.861 45.1442 105.102 45.0024 102.529C45.9166 100.143 47.1413 97.6848 48.3433 96.0073C49.7017 93.1843 45.9805 90.2623 45.4956 93.6362C45.418 95.8957 45.5892 98.3695 44.4009 99.6724C43.4947 100.391 42.8994 101.109 42.4292 101.828C41.4002 103.029 39.8718 99.7556 40.2388 99.2407C42.7072 94.0083 40.055 95.5047 39.5815 96.6538C38.3495 97.7758 39.6792 100.855 39.1431 102.906C38.5064 105.119 36.5893 107.066 38.4868 109.804C39.2768 110.665 40.6899 111.77 37.6099 111.96C35.3065 112.025 33.4646 112.435 34.7632 115.194C35.2571 116.237 35.1116 116.86 32.1343 115.625C32.2741 116.78 32.1996 117.842 31.0396 118.428C30.477 117.226 29.7023 116.544 28.8491 116.056C29.3846 117.144 30.9654 118.026 29.5054 119.506C28.106 120.765 26.8173 120.388 25.563 119.506C24.0268 118.474 22.5723 118.167 21.1821 118.428C20.1057 118.335 21.457 113.236 19.7915 113.451C19.817 112.184 21.5111 110.682 18.7729 109.804C17.5415 109.5 17.16 108.453 17.2397 107.002C16.7556 105.235 17.067 104.316 18.3345 104.416C20.1405 104.98 22.0804 104.624 24.0298 104.2C25.0204 103.921 25.8878 101.371 22.4966 102.69C21.5464 103.118 20.4536 103.196 19.2114 102.906C17.9702 102.906 17.1663 102.116 16.8013 100.535C16.6264 99.6465 16.5019 98.7201 15.0493 98.8101C12.8356 99.0628 13.1546 97.5347 12.8589 96.439C12.615 94.6639 11.8613 93.3275 10.4497 92.5581C8.19481 90.8926 9.72595 89.5518 10.4497 88.8931C11.5183 88.0437 12.7454 87.9725 13.9546 87.8149C15.3397 87.9411 11.6749 85.1719 10.231 84.1499C9.49358 83.7008 9.6921 80.9887 10.231 79.4077C10.9307 78.6835 15.2513 82.8019 17.4585 84.7974C18.8743 86.3857 21.1478 83.7812 20.7446 82.6411C19.6591 82.2723 19.0624 81.4219 18.5542 80.4849C17.3778 81.4943 16.1526 81.2626 14.8306 78.5454C14.3363 77.0738 13.51 75.6271 14.8306 74.0181C15.52 72.8203 16.4062 71.7672 17.6782 70.9995C18.4941 70.476 19.2261 69.9307 17.897 68.8442C18.0388 67.6945 18.5582 66.5438 19.4302 65.394L17.021 65.6099C17.7514 67.4425 16.3453 68.6279 15.0493 69.0591C15.3545 60.6788 14.357 64.8347 14.1187 69.5981C12.7575 71.2862 11.678 73.6888 9.354 72.9399C9.24545 71.1217 9.18412 69.2939 9.79248 67.3345C10.5342 64.767 9.17335 64.0965 8.25928 63.0229C7.36463 61.9434 7.95427 60.4256 8.47803 58.9272C9.41509 57.5619 9.79956 56.1959 10.0112 54.8306C8.5975 52.4331 8.22216 51.0581 10.0112 51.813C14.8339 51.3524 12.4658 50.614 10.0112 49.8726C9.46858 49.5367 12.1647 48.4151 13.0776 48.7944C14.6579 49.2476 16.1922 49.6433 15.4878 47.2856C15.178 46.0816 15.0561 44.638 13.9546 44.2671C12.8723 43.9257 14.9361 42.0754 14.1733 40.8179C15.1001 40.4212 17.921 44.1803 17.6782 41.6802C17.3971 38.0823 20.274 39.2579 20.0874 40.1714C21.8458 42.2226 21.3613 44.519 20.5249 46.854C20.0508 47.6769 21.6273 50.3258 22.3325 45.0757C24.1503 50.5102 23.9419 44.8961 23.5923 43.8364C21.5862 42.7654 21.9556 41.2259 22.0581 39.7397C22.1365 37.9701 25.2159 39.755 25.7817 41.6802C27.8187 44.9617 29.1078 42.1668 30.6011 41.0337C30.419 40.1575 31.8651 40.4028 33.0825 40.4907C34.3076 40.798 35.4357 40.4359 36.5151 39.7397C39.3934 39.0918 39.1179 42.184 37.6099 44.9146C37.1106 47.363 34.895 46.9395 33.0103 47.0698C29.7085 47.1987 28.1656 50.0487 25.7817 51.5972C23.4866 53.3459 24.492 55.7212 28.6294 52.8911C33.7328 48.8645 33.9225 52.916 32.353 54.6157C30.5496 56.3516 29.5723 58.1265 30.8198 60.0054C31.6887 61.0303 32.2156 58.2497 34.106 59.5737C36.3491 60.7115 35.7658 63.1586 35.6392 65.394C35.5065 68.4669 38.2147 69.3522 37.6099 65.1792C37.7064 62.1422 37.1357 59.2362 36.5151 56.3403C36.0603 54.4922 37.603 53.9076 39.1431 53.3218C41.5297 52.2434 38.0323 52.1205 41.1147 48.3638C44.2845 43.4213 44.8677 45.0338 46.8101 46.4233C49.007 48.3325 50.6409 50.645 49.6577 54.8306C48.7863 56.6145 49.1532 58.5095 49.8765 60.436C51.4463 63.7237 50.1023 65.7181 50.9712 66.9038C52.7789 69.0529 51.9726 70.712 50.7524 72.2935C48.5632 73.9105 48.9725 76.2944 49.6577 78.7603C50.1096 75.9076 50.9693 74.3944 53.1616 77.2515C53.8477 79.048 53.8481 80.8446 53.8188 82.6411C54.096 88.0504 58.0465 83.2835 56.8306 80.5933C55.4903 78.7035 54.5672 76.8383 54.9146 75.311C55.333 73.6981 55.7022 72.1041 54.6948 70.353C53.9159 68.6318 53.5761 66.9716 53.8188 65.394C54.4271 63.4539 54.1523 61.5139 53.6001 59.5737C52.7179 57.8102 52.9518 56.5956 53.8188 55.6929C54.8372 53.6087 54.9173 51.4539 54.0376 49.2261C53.5188 47.2858 54.7662 45.3989 53.8188 43.4048C52.8771 41.4719 53.7158 41.2914 54.4761 41.0337C57.5492 40.0944 54.344 37.4985 57.0503 35.3208ZM107.333 181.517C106.271 180.757 110.938 179.507 111.703 181.517C112.282 182.984 109.241 182.962 107.72 184.511C106.274 185.72 104.508 187.496 103.738 187.506C102.804 187.554 104.26 186.439 106.448 184.947C107.578 183.804 109.429 182.66 107.333 181.517ZM110.154 177.978C110.633 177.695 113.705 180.644 112.919 180.646C111.424 180.321 109.844 178.12 110.154 177.978ZM118.6 176.366C118.051 175.386 122.852 173.35 123.176 173.749C123.592 174.009 119.014 176.888 118.6 176.366ZM108.977 171.824C109.69 171.533 111.351 172.629 110.777 173.055C109.38 173.309 108.404 172.191 108.977 171.824ZM122.237 171.9C123.501 171.646 123.631 172.329 123.293 172.708C123.001 173.225 121.773 172.282 122.237 171.9ZM117.511 120.584C118.579 119.352 121.362 118.796 122.002 120.127C122.72 121.301 123.572 122.342 125.41 122.414C126.341 122.291 126.214 126.582 125.72 127.75C123.734 130.989 125.606 133.109 126.649 134.304C127.81 135.778 129.156 136.889 130.521 137.963C131.762 139.144 132.723 138.12 133.774 137.81C135.366 137.262 135.379 138.99 135.323 140.25C135.461 142.53 136.314 145.202 135.632 147.109C135.401 147.752 134.221 148.267 135.323 149.091C136.413 150.061 135.692 150.655 134.858 151.225C132.862 152.458 131.435 154.313 130.367 156.561C129.478 158.074 128.363 159.366 126.958 160.372C125.314 161.235 124.013 162.1 122.777 162.963C120.929 164.635 118.92 167.962 117.356 170.89C117.609 168.703 117.792 166.481 118.44 164.488L120.918 157.475C122.171 154.375 122.245 152.867 120.609 152.75C118.616 152.341 118.3 153.52 117.401 153.611C115.752 153.769 114.617 154.116 113.793 154.579L105.74 159.457C104.86 159.862 103.856 161.208 103.262 159.457C102.913 158.657 99.971 161.179 100.474 159.915C101.165 158.264 101.617 156.639 100.474 155.189C99.4238 153.263 100.084 152.697 101.713 152.902L104.965 147.262L106.824 139.182C107.57 137.135 108.041 135.142 105.74 133.695L100.319 130.341C98.8883 128.597 100.109 127.795 100.939 126.834C103.392 123.44 106.571 123.148 109.612 122.261C111.41 121.708 113.338 121.8 115.342 122.261C116.04 122.633 116.27 122.159 116.314 121.51C116.895 121.381 117.438 121.213 117.511 120.584ZM124.583 167.55C123.831 166.64 125.576 165.054 126.461 165.548C127.127 165.959 125.934 168.712 124.583 167.55ZM107.133 103.207C108.006 101.611 110.185 103.175 111.161 103.968C112.93 104.97 112.195 108.057 113.329 110.066C114.062 111.5 113.701 113.002 113.329 114.639C113.132 117.203 111.82 120.243 110.696 119.518C109.437 118.712 107.826 118.146 107.443 118.908C106.401 121.033 102.592 120.053 100.473 121.5C99.4115 122.771 97.9066 122.514 96.4468 122.414C95.9328 122.109 98.654 121.804 99.0796 119.67C99.6773 118.994 99.9185 118.418 99.0796 118.146C98.8073 117.622 99.7835 117.1 99.0796 116.774C97.8967 115.848 96.8416 114.898 97.686 113.573C98.099 112.76 97.8919 112.15 97.0659 111.744C95.7449 111.041 94.4215 110.343 93.5034 108.847C95.2628 106.927 97.6834 105.739 101.093 105.646C102.29 105.627 103.63 102.66 104.81 103.511C105.584 105.441 106.359 104.234 107.133 103.207ZM1.03857 82.9321C4.5064 83.1916 4.93121 85.0985 4.2915 87.5815C3.77248 88.408 3.18856 89.2534 4.67822 89.4868C7.43497 90.1318 6.38078 91.3617 5.53076 92.9927C4.6186 93.7252 6.63798 94.7958 5.22021 98.7856C5.4095 99.5815 5.63189 100.313 6.22705 100.31C7.41224 100.683 7.85064 101.644 8.0083 102.826C8.22476 103.803 8.31642 104.872 9.32471 105.264C10.5448 105.684 12.8612 106.777 11.106 108.618C10.5305 109.187 11.0146 111.734 11.4937 113.42C12.0702 114.253 12.1499 114.923 12.1128 115.554C12.4876 117.244 11.0798 117.103 10.0991 117.764C9.5045 118.062 9.64687 116.683 9.7876 116.117C9.30896 115.635 9.34596 115.069 9.47998 114.487C9.03625 113.626 8.52199 112.799 8.47314 111.744C7.76138 109.234 6.28983 105.277 5.29834 105.493C3.71909 105.784 2.28351 104.845 2.66553 103.816C3.50855 102.144 3.41918 100.407 2.81982 98.6333C2.50951 97.4518 2.5695 96.3613 2.66553 95.2798C2.71681 93.6513 1.64693 91.5875 0.884277 89.7915C0.241828 88.8527 -0.473985 87.9991 0.419434 86.6665C2.68842 85.7958 0.299394 82.8459 1.03857 82.9321ZM153.293 95.022C152.148 93.0923 153.174 89.5012 155.64 91.9419L157.987 94.7144C159.351 96.1079 156.315 99.1757 155.328 97.7935L153.293 95.022ZM172.538 87.4761C172.771 86.9355 175.107 87.5857 175.159 88.5933C175.225 89.0691 175.091 89.3089 175.12 89.7095C174.396 92.2256 174.637 88.9046 174.141 88.939C172.913 88.9564 172.309 88.3806 172.538 87.4761ZM104.52 87.8101C105.327 87.2764 107.228 86.9417 107.056 87.353C106.223 88.3752 102.952 89.4971 102.758 88.9917C102.542 88.4478 103.691 87.8334 104.52 87.8101ZM100.048 87.4292C101.37 87.0602 101.533 88.0919 101.209 88.686C101.127 89.1487 99.508 87.7704 100.048 87.4292ZM172.068 80.7778C174.403 79.0735 174.77 81.2604 175.432 82.2407C179.738 81.5566 180.402 82.3067 180.595 83.2417C180.611 84.2425 179.738 85.3541 176.762 83.7808C176.025 83.0435 174.895 82.5537 173.907 82.9341L168.861 87.3228C168.12 88.4461 165.222 86.8522 166.514 85.3208L172.068 80.7778ZM106.166 85.4282C107.056 84.5067 108.221 85.9261 107.986 86.2476C107.779 86.6515 105.93 85.8166 106.166 85.4282ZM102.623 85.7329C103.069 85.5081 103.371 86.0136 103.087 86.1714C102.579 86.4805 102.07 86.3631 102.623 85.7329ZM174.18 83.5493C174.711 83.2198 175.464 84.1384 175.12 84.4731C174.729 84.8388 173.926 83.7611 174.18 83.5493ZM99.6997 81.9956C99.3299 81.4492 100.777 81.3238 101.137 82.104C101.709 82.9157 103.526 81.0059 103.184 81.9409C101.623 84.8118 100.692 83.1872 99.6997 81.9956ZM94.4995 79.3276C95.7922 79.2901 98.4765 80.1687 98.4272 81.1792C98.3442 82.8803 98.0808 83.5472 93.7251 83.3022C92.6383 83.24 91.1671 79.423 94.4995 79.3276ZM181.729 80.9321C182.206 81.4861 182.113 82.784 180.712 82.7026C180.575 81.6958 180.928 81.118 181.729 80.9321ZM91.9868 11.3911C95.3705 11.1801 91.9085 13.8253 91.6577 15.0562C91.5758 15.8751 93.3395 16.6174 94.6694 16.9966C95.9876 17.1955 95.6789 18.85 95.436 20.4458C97.4781 21.6866 97.7774 22.7953 97.9556 23.895C98.543 27.5959 99.7628 26.1623 100.913 25.2964C102.03 23.9551 103.784 23.4896 105.622 23.1401C107.82 24.2644 105.455 26.818 104.746 28.853C107.59 28.2014 108.127 29.6586 109.016 30.7935C109.737 32.1024 109.584 34.0572 109.784 35.7515C110.151 37.0495 112.626 34.0885 112.193 32.5181C111.31 29.7282 111.675 27.4645 111.754 25.0806L112.083 21.3081C110.828 19.5038 111.333 16.7637 113.288 18.6128C113.096 17.7255 113.775 17.1803 114.274 16.5649L113.945 14.1938C112.28 12.2636 114.223 12.1732 116.026 13.2231C116.965 13.664 118.253 14.5706 117.998 15.3794C117.565 16.7077 116.734 18.1264 118.107 19.0444C119.57 20.2788 119.851 21.6189 118.107 23.1401C116.758 24.3525 115.572 26.9813 117.231 29.1763C117.71 29.6971 119.197 28.0088 120.407 27.6675C122.821 27.6902 123.043 26.0099 122.707 23.895C122.407 21.8321 124.236 21.6327 126.54 21.8472L127.197 19.6909C126.122 19.5224 123.891 19.4029 124.349 18.7212C124.93 17.2736 126.633 17.7902 128.511 18.6128C129.054 18.9542 127.308 20.0502 127.306 21.7925L129.606 21.6313C131.54 19.6626 130.703 18.2385 130.591 16.6724C131.543 18.1796 132.382 19.702 130.044 21.6313C131.726 20.5526 132.168 21.6437 132.563 22.8169C133.421 21.6197 134.859 22.5602 136.287 23.4634C138.436 24.7833 140.021 24.9929 141.763 25.5112L151.072 25.7271C155.385 26.3985 153.883 27.7439 153.481 28.9614C152.678 30.183 152.752 31.6916 153.701 33.4878C154.731 35.793 154.348 38.2253 152.167 40.8179C148.564 42.8097 148.856 47.2657 144.72 49.4419C143.616 50.5825 143.831 53.0223 143.843 55.2622C143.963 59.6151 143.693 63.7554 141.215 66.688C139.536 69.3708 137.857 68.5273 136.177 67.5503C134.753 65.5084 131.647 66.5595 131.359 68.4126C129.213 74.1951 126.348 75.9167 123.035 75.0962C116.635 73.4669 115.503 70.7541 116.902 66.0415C117.452 64.8619 117.407 62.6941 115.587 64.7476C114.391 66.2456 112.765 66.4745 110.988 66.2573L107.264 66.0415C105.266 65.9009 103.353 65.9006 101.789 66.4722C99.1287 67.8441 98.8997 66.9731 98.5024 66.2573C98.0857 64.7438 96.4182 64.3379 94.5601 64.1011C90.153 63.0166 89.6144 59.3936 89.522 55.478C90.0033 52.6142 92.7437 54.5226 94.3413 56.3403C95.8244 57.1612 97.386 57.5958 99.1597 56.9868C99.8898 58.1757 100.62 57.6307 101.35 56.9868C98.1673 55.2431 98.1004 54.0105 97.4077 52.6753C97.2991 49.8555 101.694 50.5182 105.512 50.7349C106.958 49.8737 110.307 47.9012 109.673 47.7163C108.629 47.4508 107.535 47.234 107.483 45.9917C107.263 44.175 104.416 44.8309 102.883 45.9917C101.879 46.9488 96.4926 47.0394 93.0269 46.854C90.9753 48.9498 88.3556 49.704 85.5796 50.0884C84.6304 49.5258 83.6811 50.0632 82.7319 50.3042C81.1382 50.8343 79.6612 50.8134 78.7896 47.9321C78.2925 46.3026 77.6036 44.7484 76.3804 43.4048C74.9132 41.9546 75.6593 39.7266 76.1606 37.5845C77.7356 39.1709 78.6486 37.8234 79.6655 36.938C81.4492 35.7338 81.9361 34.7704 78.3511 34.5659C75.9199 34.1072 73.7035 32.9307 71.9995 30.0386C71.0227 27.93 74.0012 25.3222 75.7231 26.3745C77.6688 27.4403 78.7275 27.009 79.6655 26.3745C80.5584 25.6018 82.1473 26.2533 82.0747 27.2368C82.2938 30.3984 83.6815 31.4041 86.2368 30.2544C87.9613 29.126 85.1962 27.0731 83.6626 25.4038C82.7771 23.5858 82.1795 21.8767 83.1704 20.769C84.5188 18.9478 85.5716 21.2193 85.7983 22.2778C86.2604 24.7457 87.7985 25.0968 89.0845 25.9429C88.6001 23.5352 89.2449 21.7626 89.7417 19.9067C90.256 18.0959 89.7269 16.9096 86.894 17.104C85.8596 16.9097 86.5423 13.4628 89.522 13.0083C90.3434 13.4418 91.1654 13.6154 91.9868 13.3315C89.0177 11.6927 91.4883 11.3174 91.9868 11.3911ZM90.5171 70.8345C90.2611 69.8034 92.1772 71.1285 93.0063 71.5425C93.6107 71.8302 93.9667 72.4659 92.4526 73.0122C91.5901 73.4355 90.7978 73.4893 90.5171 70.8345ZM100.75 70.5083C101.268 69.5841 102.263 70.3725 102.174 71.2153C102.048 71.7821 100.491 71.4424 100.75 70.5083ZM88.896 69.8794C89.4387 69.8593 88.6836 71.3546 88.4312 71.0981C88.1419 70.8882 88.1385 69.7321 88.896 69.8794ZM86.437 69.8599C86.3172 69.126 86.4556 68.5997 87.4634 68.7739C87.7584 68.7041 87.6045 69.2054 87.231 69.5356C86.5299 70.5744 86.5488 70.0777 86.437 69.8599ZM96.3247 68.9292C95.5467 68.5382 96.6974 66.7257 97.4585 66.9692C97.9209 67.0417 97.2135 69.357 96.3247 68.9292ZM87.6401 67.187C87.5469 65.8752 92.167 65.8957 91.8442 67.2954C91.9237 68.8763 87.6254 68.508 87.6401 67.187ZM86.5894 63.3755C88.2547 63.1704 89.2178 63.5072 88.0278 64.3013C86.8584 65.098 86.1132 63.5049 86.5894 63.3755ZM10.0884 44.811C13.4614 44.8832 13.114 47.3773 12.356 47.0425C11.5379 46.9038 10.7597 47.0415 10.0884 47.9136C9.56141 48.285 9.04928 44.6753 10.0884 44.811ZM10.3101 40.02C10.9837 39.9796 12.2973 44.4442 10.2544 42.9058C8.93082 41.8423 9.52809 40.2917 10.3101 40.02ZM157.752 23.5718C159.158 23.0377 159.917 23.3923 160.491 24.4956C161.103 25.7263 158.311 28.3698 157.205 27.3442C156.174 25.7612 156.49 24.5394 157.752 23.5718ZM76.2397 22.3394C74.433 21.1531 76.7943 18.2648 78.1948 19.2593L79.7593 20.645C81.005 22.0233 78.829 25.0785 77.1782 23.3403L76.2397 22.3394ZM196.568 12.0688C197.931 10.4364 200.925 13.6238 199.444 14.8999C196.427 17.1967 193.684 19.8982 191.257 23.0659C190.942 23.6903 183.856 23.514 183.905 22.3091C184.964 20.1776 186.22 19.068 189.044 18.3843C192.328 16.47 194.434 14.2658 196.568 12.0688ZM125.642 13.7515C126.186 13.6492 126.043 16.8636 125.254 16.5278C124.066 16.2657 125.081 13.7012 125.642 13.7515ZM136.044 13.9087C135.536 13.0031 137.545 11.8943 137.921 12.5229C138.7 13.5094 136.209 14.2832 136.044 13.9087ZM123.263 12.4722C123.34 11.1156 124.515 11.0323 124.923 11.2739C125.531 11.4 126.491 12.2041 124.868 12.5259C124.457 12.6538 123.532 13.1138 123.263 12.4722ZM138.978 12.2534C138.142 10.4181 140.272 10.0006 140.621 10.6362C141.895 11.9145 139.722 12.9914 138.978 12.2534ZM136.435 11.0601C136.048 10.5312 136.76 9.8086 137.217 10.1743C137.593 10.3704 137.045 11.5415 136.435 11.0601ZM96.5786 3.70654C97.3297 3.91281 96.513 5.84655 95.9526 5.47803C95.3717 5.21659 95.3865 3.65151 96.5786 3.70654ZM99.6294 4.5542C99.0487 3.19977 101.724 1.90642 102.524 2.62939C103.193 3.41686 100.705 5.40751 99.6294 4.5542ZM96.1089 0.165527C97.1151 -0.627053 99.2725 1.6258 98.2993 2.70557C97.4723 3.36916 95.2519 1.06248 96.1089 0.165527Z" fill="url(#blueGradient)" />
                    </svg>
                    <span className='collection-name'>Svalbard</span>
                  </div>
                  <div className='label-container'>
                    <Label
                      icon={
                        <svg className='icons' xmlns="http://www.w3.org/2000/svg" width="16" height="13" viewBox="0 0 16 13" fill="none">
                          <path d="M2.2897 13C1.53578 13 0.965678 12.8069 0.579407 12.4208C0.193136 12.0394 0 11.4765 0 10.7322V2.22598C0 1.49096 0.181501 0.937377 0.544503 0.565217C0.912158 0.188406 1.42176 0 2.0733 0H4.04887C4.29087 0 4.50029 0.016282 4.67714 0.0488459C4.85399 0.0814099 5.01687 0.137234 5.16579 0.216318C5.31472 0.29075 5.47062 0.39542 5.63351 0.530327L6.03141 0.858293C6.22688 1.01181 6.4107 1.12113 6.5829 1.18626C6.75509 1.25139 6.96684 1.28395 7.21815 1.28395H13.7103C14.4596 1.28395 15.0273 1.47701 15.4136 1.86312C15.8045 2.24924 16 2.81446 16 3.55878V10.7322C16 11.4765 15.8138 12.0394 15.4415 12.4208C15.0692 12.8069 14.5503 13 13.8848 13H2.2897ZM2.37347 11.6253H13.6195C13.9407 11.6253 14.1896 11.5416 14.3665 11.3741C14.5433 11.2067 14.6318 10.9554 14.6318 10.6205V3.6774C14.6318 3.33781 14.5433 3.08427 14.3665 2.9168C14.1896 2.74468 13.9407 2.65862 13.6195 2.65862H6.85515C6.61315 2.65862 6.4014 2.64233 6.2199 2.60977C6.04305 2.57721 5.87784 2.52371 5.72426 2.44928C5.57533 2.37019 5.42176 2.26552 5.26353 2.13527L4.86562 1.8073C4.67016 1.64913 4.48633 1.53748 4.31414 1.47236C4.1466 1.40258 3.9395 1.36769 3.69284 1.36769H2.34555C2.03374 1.36769 1.79407 1.45142 1.62653 1.61889C1.45899 1.78171 1.37522 2.02362 1.37522 2.34461V10.6135C1.37522 10.9531 1.45899 11.2067 1.62653 11.3741C1.79872 11.5416 2.0477 11.6253 2.37347 11.6253ZM2.22688 4.6613V4.15888C2.22688 3.94024 2.2804 3.77975 2.38743 3.6774C2.49913 3.57041 2.66899 3.51691 2.89703 3.51691H13.096C13.324 3.51691 13.4916 3.57041 13.5986 3.6774C13.7103 3.77975 13.7661 3.94024 13.7661 4.15888V4.6613H2.22688Z" fill="black" />
                        </svg>
                      }
                      text="Collection"
                    />
                    <Label
                      icon={
                        <svg className='icons' xmlns="http://www.w3.org/2000/svg" width="16" height="15" viewBox="0 0 16 15" fill="none">
                          <path d="M2.58268 15C1.73228 15 1.08924 14.7777 0.653543 14.3332C0.217848 13.8939 0 13.2458 0 12.3889V2.61114C0 1.74879 0.217848 1.09802 0.653543 0.658811C1.08924 0.219604 1.73228 0 2.58268 0H13.4173C14.273 0 14.916 0.219604 15.3465 0.658811C15.7822 1.09802 16 1.74879 16 2.61114V12.3889C16 13.2458 15.7822 13.8939 15.3465 14.3332C14.916 14.7777 14.273 15 13.4173 15H2.58268ZM2.56693 13.4172H13.4252C13.7559 13.4172 14.0079 13.3315 14.1811 13.1602C14.3596 12.9834 14.4488 12.7209 14.4488 12.3728V4.94912C14.4488 4.60096 14.3596 4.33851 14.1811 4.16176C14.0079 3.985 13.7559 3.89663 13.4252 3.89663H2.56693C2.23622 3.89663 1.98425 3.985 1.81102 4.16176C1.6378 4.33851 1.55118 4.60096 1.55118 4.94912V12.3728C1.55118 12.7209 1.6378 12.9834 1.81102 13.1602C1.98425 13.3315 2.23622 13.4172 2.56693 13.4172ZM6.48819 6.69256C6.34646 6.69256 6.24672 6.66577 6.18898 6.61221C6.13648 6.55329 6.11024 6.4542 6.11024 6.31494V5.84092C6.11024 5.6963 6.13648 5.59989 6.18898 5.55169C6.24672 5.49813 6.34646 5.47134 6.48819 5.47134H6.95276C7.08924 5.47134 7.18635 5.49813 7.24409 5.55169C7.30184 5.59989 7.33071 5.6963 7.33071 5.84092V6.31494C7.33071 6.4542 7.30184 6.55329 7.24409 6.61221C7.18635 6.66577 7.08924 6.69256 6.95276 6.69256H6.48819ZM9.05512 6.69256C8.91864 6.69256 8.82152 6.66577 8.76378 6.61221C8.71129 6.55329 8.68504 6.4542 8.68504 6.31494V5.84092C8.68504 5.6963 8.71129 5.59989 8.76378 5.55169C8.82152 5.49813 8.91864 5.47134 9.05512 5.47134H9.51969C9.66667 5.47134 9.7664 5.49813 9.8189 5.55169C9.87139 5.59989 9.89764 5.6963 9.89764 5.84092V6.31494C9.89764 6.4542 9.87139 6.55329 9.8189 6.61221C9.7664 6.66577 9.66667 6.69256 9.51969 6.69256H9.05512ZM11.6378 6.69256C11.4961 6.69256 11.3963 6.66577 11.3386 6.61221C11.2861 6.55329 11.2598 6.4542 11.2598 6.31494V5.84092C11.2598 5.6963 11.2861 5.59989 11.3386 5.55169C11.3963 5.49813 11.4961 5.47134 11.6378 5.47134H12.0945C12.2415 5.47134 12.3412 5.49813 12.3937 5.55169C12.4462 5.59989 12.4724 5.6963 12.4724 5.84092V6.31494C12.4724 6.4542 12.4462 6.55329 12.3937 6.61221C12.3412 6.66577 12.2415 6.69256 12.0945 6.69256H11.6378ZM3.91339 9.27156C3.77165 9.27156 3.67192 9.24478 3.61417 9.19122C3.56168 9.13765 3.53543 9.04124 3.53543 8.90198V8.42796C3.53543 8.28334 3.56168 8.18425 3.61417 8.13069C3.67192 8.07713 3.77165 8.05035 3.91339 8.05035H4.37795C4.51444 8.05035 4.60892 8.07713 4.66142 8.13069C4.71916 8.18425 4.74803 8.28334 4.74803 8.42796V8.90198C4.74803 9.04124 4.71916 9.13765 4.66142 9.19122C4.60892 9.24478 4.51444 9.27156 4.37795 9.27156H3.91339ZM6.48819 9.27156C6.34646 9.27156 6.24672 9.24478 6.18898 9.19122C6.13648 9.13765 6.11024 9.04124 6.11024 8.90198V8.42796C6.11024 8.28334 6.13648 8.18425 6.18898 8.13069C6.24672 8.07713 6.34646 8.05035 6.48819 8.05035H6.95276C7.08924 8.05035 7.18635 8.07713 7.24409 8.13069C7.30184 8.18425 7.33071 8.28334 7.33071 8.42796V8.90198C7.33071 9.04124 7.30184 9.13765 7.24409 9.19122C7.18635 9.24478 7.08924 9.27156 6.95276 9.27156H6.48819ZM9.05512 9.27156C8.91864 9.27156 8.82152 9.24478 8.76378 9.19122C8.71129 9.13765 8.68504 9.04124 8.68504 8.90198V8.42796C8.68504 8.28334 8.71129 8.18425 8.76378 8.13069C8.82152 8.07713 8.91864 8.05035 9.05512 8.05035H9.51969C9.66667 8.05035 9.7664 8.07713 9.8189 8.13069C9.87139 8.18425 9.89764 8.28334 9.89764 8.42796V8.90198C9.89764 9.04124 9.87139 9.13765 9.8189 9.19122C9.7664 9.24478 9.66667 9.27156 9.51969 9.27156H9.05512ZM11.6378 9.27156C11.4961 9.27156 11.3963 9.24478 11.3386 9.19122C11.2861 9.13765 11.2598 9.04124 11.2598 8.90198V8.42796C11.2598 8.28334 11.2861 8.18425 11.3386 8.13069C11.3963 8.07713 11.4961 8.05035 11.6378 8.05035H12.0945C12.2415 8.05035 12.3412 8.07713 12.3937 8.13069C12.4462 8.18425 12.4724 8.28334 12.4724 8.42796V8.90198C12.4724 9.04124 12.4462 9.13765 12.3937 9.19122C12.3412 9.24478 12.2415 9.27156 12.0945 9.27156H11.6378ZM3.91339 11.8586C3.77165 11.8586 3.67192 11.8345 3.61417 11.7863C3.56168 11.7327 3.53543 11.631 3.53543 11.481V11.015C3.53543 10.8704 3.56168 10.7713 3.61417 10.7177C3.67192 10.6642 3.77165 10.6374 3.91339 10.6374H4.37795C4.51444 10.6374 4.60892 10.6642 4.66142 10.7177C4.71916 10.7713 4.74803 10.8704 4.74803 11.015V11.481C4.74803 11.631 4.71916 11.7327 4.66142 11.7863C4.60892 11.8345 4.51444 11.8586 4.37795 11.8586H3.91339ZM6.48819 11.8586C6.34646 11.8586 6.24672 11.8345 6.18898 11.7863C6.13648 11.7327 6.11024 11.631 6.11024 11.481V11.015C6.11024 10.8704 6.13648 10.7713 6.18898 10.7177C6.24672 10.6642 6.34646 10.6374 6.48819 10.6374H6.95276C7.08924 10.6374 7.18635 10.6642 7.24409 10.7177C7.30184 10.7713 7.33071 10.8704 7.33071 11.015V11.481C7.33071 11.631 7.30184 11.7327 7.24409 11.7863C7.18635 11.8345 7.08924 11.8586 6.95276 11.8586H6.48819ZM9.05512 11.8586C8.91864 11.8586 8.82152 11.8345 8.76378 11.7863C8.71129 11.7327 8.68504 11.631 8.68504 11.481V11.015C8.68504 10.8704 8.71129 10.7713 8.76378 10.7177C8.82152 10.6642 8.91864 10.6374 9.05512 10.6374H9.51969C9.66667 10.6374 9.7664 10.6642 9.8189 10.7177C9.87139 10.7713 9.89764 10.8704 9.89764 11.015V11.481C9.89764 11.631 9.87139 11.7327 9.8189 11.7863C9.7664 11.8345 9.66667 11.8586 9.51969 11.8586H9.05512Z" fill="black" />
                        </svg>
                      }
                      text="March 2023"
                    />
                    <Label
                      icon={
                        <svg className='icons' xmlns="http://www.w3.org/2000/svg" width="16" height="13" viewBox="0 0 16 13" fill="none">
                          <path d="M2.37737 12.4151C1.81455 12.4151 1.38905 12.2503 1.10089 11.9207C0.81272 11.5911 0.659631 11.1037 0.641621 10.4585L3.18784 8.10498C3.32742 7.97036 3.467 7.87288 3.60658 7.81253C3.75067 7.74755 3.90151 7.71505 4.0591 7.71505C4.21669 7.71505 4.37203 7.74987 4.52512 7.8195C4.68271 7.88449 4.83129 7.98197 4.97087 8.11194L6.22035 9.27477L9.26636 6.4617C9.42395 6.32244 9.58604 6.218 9.75264 6.14837C9.91923 6.07874 10.0948 6.04392 10.2794 6.04392C10.4595 6.04392 10.6351 6.08106 10.8062 6.15533C10.9818 6.22496 11.1439 6.33173 11.2925 6.47563L15.2976 10.3471C15.3246 11.0202 15.1715 11.5331 14.8383 11.8859C14.5051 12.2387 13.9986 12.4151 13.3187 12.4151H2.37737ZM5.23428 6.62882C4.9371 6.62882 4.6647 6.55454 4.41705 6.406C4.17391 6.25745 3.97805 6.05553 3.82946 5.80021C3.68538 5.5449 3.61334 5.26406 3.61334 4.95769C3.61334 4.65595 3.68538 4.37743 3.82946 4.12212C3.97805 3.86681 4.17391 3.66488 4.41705 3.51634C4.6647 3.36315 4.9371 3.28656 5.23428 3.28656C5.53145 3.28656 5.8016 3.36315 6.04474 3.51634C6.28788 3.66488 6.4815 3.86681 6.62558 4.12212C6.77417 4.37743 6.84846 4.65595 6.84846 4.95769C6.84846 5.26406 6.77417 5.5449 6.62558 5.80021C6.4815 6.05553 6.28788 6.25745 6.04474 6.406C5.8016 6.55454 5.53145 6.62882 5.23428 6.62882ZM2.21528 13C1.48586 13 0.93429 12.8097 0.560574 12.429C0.186858 12.0484 0 11.4867 0 10.744V2.26299C0 1.52026 0.186858 0.958579 0.560574 0.577933C0.93429 0.192644 1.48586 0 2.21528 0H13.778C14.5119 0 15.0657 0.192644 15.4394 0.577933C15.8131 0.958579 16 1.52026 16 2.26299V10.744C16 11.4867 15.8131 12.0484 15.4394 12.429C15.0657 12.8097 14.5119 13 13.778 13H2.21528ZM2.29633 11.6352H13.7037C14.0144 11.6352 14.253 11.5517 14.4196 11.3846C14.5862 11.2128 14.6695 10.9598 14.6695 10.6256V2.38136C14.6695 2.04713 14.5862 1.79646 14.4196 1.62935C14.253 1.4576 14.0144 1.37172 13.7037 1.37172H2.29633C1.98115 1.37172 1.74026 1.4576 1.57366 1.62935C1.41157 1.79646 1.33052 2.04713 1.33052 2.38136V10.6256C1.33052 10.9598 1.41157 11.2128 1.57366 11.3846C1.74026 11.5517 1.98115 11.6352 2.29633 11.6352Z" fill="black" />
                        </svg>
                      }
                      text="41"
                    />
                  </div>
                </div>
              ) : (
                <>
                  <div className='title-container'>
                    <h1 className='collection-title'>The</h1>
                    <div className='collection-title-and-name-container'>
                      <svg className='collection-title-svg' xmlns="http://www.w3.org/2000/svg" width="200" height="265" viewBox="0 0 200 265" fill="none">
                        <defs>
                          <linearGradient id="blueGradient" x1="0%" y1="100%" x2="0%" y2="0%">
                            <stop offset="0%" stopColor="rgba(0, 50, 77, 1)" />
                            <stop offset="35%" stopColor="rgba(0, 111, 196, 1)" />
                            <stop offset="100%" stopColor="rgba(176, 229, 255, 1)" />
                          </linearGradient>
                        </defs>
                        <path d="M74.8315 262.216C74.6947 260.695 75.3048 255.414 79.603 258.29C80.7848 259.08 80.8672 263.014 80.1509 264.373C79.3489 265.893 74.9684 263.737 74.8315 262.216ZM152.302 195.6C152.941 194.49 154.235 195.338 153.74 196.253C152.21 199.085 151.42 201.836 150.48 205.828C150.302 206.557 148.39 204.583 148.71 203.758C149.863 200.095 150.857 198.111 152.302 195.6ZM50.9331 202.929C52.2545 202.484 53.9264 204.884 52.145 205.816C51.2988 206.355 49.7813 203.337 50.9331 202.929ZM57.0503 35.3208C59.9408 28.8826 62.7307 35.1052 62.7993 39.0933C63.7702 42.5518 64.5999 41.2696 65.4282 39.9556C65.2756 38.9452 64.7856 37.7141 66.3042 37.8003C69.8096 38.5841 70.2608 40.4132 70.4663 42.3267C70.6012 43.5096 71.3628 44.446 72.2183 45.3452C74.8728 47.6142 73.6989 50.0545 73.313 52.4595C73.2233 53.7643 70.6765 56.0201 68.9331 57.6333C70.6345 58.0067 70.7699 59.2211 70.9038 60.436C70.6362 61.7536 70.4214 63.1232 69.5894 63.8853C68.2024 65.7534 69.699 67.065 71.1226 66.0415C73.9352 63.9083 73.3863 60.4875 73.7515 57.4175C74.0296 52.7043 74.9398 54.1923 76.5991 55.9087C79.4922 57.6583 80.2894 60.1453 81.1987 62.5923C82.216 64.8611 82.0775 66.4298 81.1987 67.5503L78.7896 70.5688C77.5188 71.845 78.172 72.5229 79.6655 72.9399C80.3956 75.7685 81.1259 75.7638 81.856 74.8804C82.3532 74.2172 82.8567 73.5586 84.9224 74.0181C86.2777 74.3173 85.7653 76.0254 87.3315 75.5269C89.2065 72.3704 88.7795 73.5712 88.8647 73.8022C88.1516 87.3425 98.2809 89.6359 103.979 91.48C107.302 91.682 107.099 94.1155 106.388 96.8696C105.836 98.1199 105.176 99.1935 103.759 99.0259C102.372 98.3408 100.547 100.137 99.5981 99.4565C98.5858 98.8676 97.6898 98.9691 96.9692 100.103C97.2239 102.006 95.5197 101.982 93.4653 101.613C92.1683 101.503 91.3357 102.308 90.6177 103.337C89.9831 104.149 86.6846 102.49 87.9888 105.924C89.788 107.718 87.5867 109.463 86.894 110.667C86.9821 113.256 85.319 113.138 83.3892 112.607C82.0563 112.073 82.0241 113.002 82.7319 114.763C83.2827 115.697 83.6238 116.632 82.7319 117.566C81.8557 119.161 82.4016 120.197 82.9507 121.231C84.0088 122.956 81.826 124.896 81.856 126.405C82.8386 128.912 81.4383 130.14 79.2271 130.932C76.8653 131.59 75.2061 132.181 75.7231 134.597C75.79 136.349 74.3202 137.971 75.2847 139.986C76.729 141.888 76.1444 143.542 75.2847 145.161C74.6059 146.813 74.5201 148.466 74.4087 150.119C74.0195 155.956 71.9498 157.935 68.0562 155.724C66.1879 154.346 63.9965 164.835 63.4565 172.324C63.5737 173.804 62.885 174.492 62.1421 175.126C61.9179 175.784 61.1617 176.354 62.5806 177.282C63.5605 179.807 59.0269 175.666 59.2954 176.635C60.6884 179.566 63.5133 182.654 59.9517 185.043C58.5898 185.668 57.6669 187.157 56.8853 188.923C56.6492 189.939 53.6188 188.825 57.105 191.942C60.4671 195.194 58.4696 196.124 56.8853 197.978C55.9735 201.106 54.1369 201.504 52.0669 201.212C51.5702 199.847 52.6721 196.973 51.8481 197.116C50.9423 197.877 50.5139 198.57 50.314 200.565C49.3648 202.505 47.3205 200.888 48.7808 198.625C50.7798 197.151 49.9463 195.424 48.7808 193.667C47.0638 192.591 45.3297 191.549 44.1812 189.355C43.8331 188.581 43.7494 187.005 42.854 187.613C42.888 187.067 42.9435 186.502 42.1245 186.656L41.5532 185.906C38.9679 182.85 43.5376 183.08 44.8384 181.809C46.4671 180.502 47.9523 179.974 49.0005 181.809C50.3465 184.028 51.1281 180.878 52.0669 179.222C52.4599 178.615 48.1275 179.479 47.4673 177.282C46.3417 174.369 45.3914 177.719 45.0571 179.654C45.1514 180.459 40.5483 179.206 39.3628 180.947C38.8919 181.39 38.3057 177.972 36.7339 176.851C37.394 173.436 34.3207 169.165 32.5728 169.737C30.7411 170.037 28.9328 168.89 28.8491 168.012C28.7598 166.42 28.8147 164.799 27.3159 163.485C26.8127 162.193 26.8697 161.04 27.5347 160.036C26.7172 158.455 26.389 156.873 27.3159 155.292C26.2141 151.874 28.8226 151.196 32.353 151.197C33.4315 151.552 33.3813 152.573 33.0103 153.784C32.9603 155.69 35.87 155.264 36.2964 153.137C37.8554 150.904 44.4723 154.007 48.562 157.017C50.7721 158.604 51.9851 158.053 50.0952 155.832C48.0864 153.131 45.0131 150.811 39.8003 149.256C38.7052 149.045 37.6102 149.108 36.5151 149.472C36.63 148.027 36.9293 146.544 35.6392 145.375C33.9277 143.722 35.8337 142.979 36.5151 143.867C37.3037 146.295 39.3214 144.561 41.3335 144.513C45.4018 144.761 49.0156 144.113 52.5044 143.22C55.0998 140.753 57.9448 141.714 60.8286 143.22C59.1007 141.559 56.481 140.211 58.6382 137.184C54.5315 138.288 50.5555 138.94 47.0288 138.046C44.2485 136.548 42.7295 137.177 41.9907 139.124C41.0213 140.592 37.4046 141.607 29.7251 141.926C28.8782 144.47 27.4127 143.363 26.0015 142.574C25.5634 141.783 25.8554 140.849 26.8774 139.771C27.9284 138.037 27.3237 136.845 26.6587 135.674C25.6994 134.758 25.0722 133.712 25.563 132.225C25.9725 128.667 26.617 127.184 27.3159 126.189C28.4891 125.522 30.4863 124.952 30.3823 125.973C30.2428 127.925 31.5031 129.326 32.7915 130.716C31.9788 126.65 32.8761 124.94 34.9819 124.895L39.1431 125.111C42.4856 122.382 44.0722 117.934 46.3716 120.369C48.9144 120.972 46.792 117.681 47.9048 116.918C48.7542 115.527 50.7166 113.075 51.8481 114.117C52.7241 115.026 53.6001 115.002 54.4761 113.901C55.231 113.082 55.8342 113.759 56.4478 114.332C58.5386 116.812 60.7875 114.788 63.019 113.254C65.6475 110.739 65.2819 110.308 61.9233 111.96C60.6564 112.75 59.4712 113.164 58.6382 111.96C58.2205 110.689 57.8189 109.404 54.6948 110.236C53.9537 109.917 58.586 104.004 60.6089 100.965C63.1602 97.5267 56.8613 97.3389 56.8853 99.8882C56.2056 102.536 55.4096 105.126 52.7241 106.787C50.7712 107.955 48.6869 108.48 46.5903 108.942C44.4968 108.861 45.1442 105.102 45.0024 102.529C45.9166 100.143 47.1413 97.6848 48.3433 96.0073C49.7017 93.1843 45.9805 90.2623 45.4956 93.6362C45.418 95.8957 45.5892 98.3695 44.4009 99.6724C43.4947 100.391 42.8994 101.109 42.4292 101.828C41.4002 103.029 39.8718 99.7556 40.2388 99.2407C42.7072 94.0083 40.055 95.5047 39.5815 96.6538C38.3495 97.7758 39.6792 100.855 39.1431 102.906C38.5064 105.119 36.5893 107.066 38.4868 109.804C39.2768 110.665 40.6899 111.77 37.6099 111.96C35.3065 112.025 33.4646 112.435 34.7632 115.194C35.2571 116.237 35.1116 116.86 32.1343 115.625C32.2741 116.78 32.1996 117.842 31.0396 118.428C30.477 117.226 29.7023 116.544 28.8491 116.056C29.3846 117.144 30.9654 118.026 29.5054 119.506C28.106 120.765 26.8173 120.388 25.563 119.506C24.0268 118.474 22.5723 118.167 21.1821 118.428C20.1057 118.335 21.457 113.236 19.7915 113.451C19.817 112.184 21.5111 110.682 18.7729 109.804C17.5415 109.5 17.16 108.453 17.2397 107.002C16.7556 105.235 17.067 104.316 18.3345 104.416C20.1405 104.98 22.0804 104.624 24.0298 104.2C25.0204 103.921 25.8878 101.371 22.4966 102.69C21.5464 103.118 20.4536 103.196 19.2114 102.906C17.9702 102.906 17.1663 102.116 16.8013 100.535C16.6264 99.6465 16.5019 98.7201 15.0493 98.8101C12.8356 99.0628 13.1546 97.5347 12.8589 96.439C12.615 94.6639 11.8613 93.3275 10.4497 92.5581C8.19481 90.8926 9.72595 89.5518 10.4497 88.8931C11.5183 88.0437 12.7454 87.9725 13.9546 87.8149C15.3397 87.9411 11.6749 85.1719 10.231 84.1499C9.49358 83.7008 9.6921 80.9887 10.231 79.4077C10.9307 78.6835 15.2513 82.8019 17.4585 84.7974C18.8743 86.3857 21.1478 83.7812 20.7446 82.6411C19.6591 82.2723 19.0624 81.4219 18.5542 80.4849C17.3778 81.4943 16.1526 81.2626 14.8306 78.5454C14.3363 77.0738 13.51 75.6271 14.8306 74.0181C15.52 72.8203 16.4062 71.7672 17.6782 70.9995C18.4941 70.476 19.2261 69.9307 17.897 68.8442C18.0388 67.6945 18.5582 66.5438 19.4302 65.394L17.021 65.6099C17.7514 67.4425 16.3453 68.6279 15.0493 69.0591C15.3545 60.6788 14.357 64.8347 14.1187 69.5981C12.7575 71.2862 11.678 73.6888 9.354 72.9399C9.24545 71.1217 9.18412 69.2939 9.79248 67.3345C10.5342 64.767 9.17335 64.0965 8.25928 63.0229C7.36463 61.9434 7.95427 60.4256 8.47803 58.9272C9.41509 57.5619 9.79956 56.1959 10.0112 54.8306C8.5975 52.4331 8.22216 51.0581 10.0112 51.813C14.8339 51.3524 12.4658 50.614 10.0112 49.8726C9.46858 49.5367 12.1647 48.4151 13.0776 48.7944C14.6579 49.2476 16.1922 49.6433 15.4878 47.2856C15.178 46.0816 15.0561 44.638 13.9546 44.2671C12.8723 43.9257 14.9361 42.0754 14.1733 40.8179C15.1001 40.4212 17.921 44.1803 17.6782 41.6802C17.3971 38.0823 20.274 39.2579 20.0874 40.1714C21.8458 42.2226 21.3613 44.519 20.5249 46.854C20.0508 47.6769 21.6273 50.3258 22.3325 45.0757C24.1503 50.5102 23.9419 44.8961 23.5923 43.8364C21.5862 42.7654 21.9556 41.2259 22.0581 39.7397C22.1365 37.9701 25.2159 39.755 25.7817 41.6802C27.8187 44.9617 29.1078 42.1668 30.6011 41.0337C30.419 40.1575 31.8651 40.4028 33.0825 40.4907C34.3076 40.798 35.4357 40.4359 36.5151 39.7397C39.3934 39.0918 39.1179 42.184 37.6099 44.9146C37.1106 47.363 34.895 46.9395 33.0103 47.0698C29.7085 47.1987 28.1656 50.0487 25.7817 51.5972C23.4866 53.3459 24.492 55.7212 28.6294 52.8911C33.7328 48.8645 33.9225 52.916 32.353 54.6157C30.5496 56.3516 29.5723 58.1265 30.8198 60.0054C31.6887 61.0303 32.2156 58.2497 34.106 59.5737C36.3491 60.7115 35.7658 63.1586 35.6392 65.394C35.5065 68.4669 38.2147 69.3522 37.6099 65.1792C37.7064 62.1422 37.1357 59.2362 36.5151 56.3403C36.0603 54.4922 37.603 53.9076 39.1431 53.3218C41.5297 52.2434 38.0323 52.1205 41.1147 48.3638C44.2845 43.4213 44.8677 45.0338 46.8101 46.4233C49.007 48.3325 50.6409 50.645 49.6577 54.8306C48.7863 56.6145 49.1532 58.5095 49.8765 60.436C51.4463 63.7237 50.1023 65.7181 50.9712 66.9038C52.7789 69.0529 51.9726 70.712 50.7524 72.2935C48.5632 73.9105 48.9725 76.2944 49.6577 78.7603C50.1096 75.9076 50.9693 74.3944 53.1616 77.2515C53.8477 79.048 53.8481 80.8446 53.8188 82.6411C54.096 88.0504 58.0465 83.2835 56.8306 80.5933C55.4903 78.7035 54.5672 76.8383 54.9146 75.311C55.333 73.6981 55.7022 72.1041 54.6948 70.353C53.9159 68.6318 53.5761 66.9716 53.8188 65.394C54.4271 63.4539 54.1523 61.5139 53.6001 59.5737C52.7179 57.8102 52.9518 56.5956 53.8188 55.6929C54.8372 53.6087 54.9173 51.4539 54.0376 49.2261C53.5188 47.2858 54.7662 45.3989 53.8188 43.4048C52.8771 41.4719 53.7158 41.2914 54.4761 41.0337C57.5492 40.0944 54.344 37.4985 57.0503 35.3208ZM107.333 181.517C106.271 180.757 110.938 179.507 111.703 181.517C112.282 182.984 109.241 182.962 107.72 184.511C106.274 185.72 104.508 187.496 103.738 187.506C102.804 187.554 104.26 186.439 106.448 184.947C107.578 183.804 109.429 182.66 107.333 181.517ZM110.154 177.978C110.633 177.695 113.705 180.644 112.919 180.646C111.424 180.321 109.844 178.12 110.154 177.978ZM118.6 176.366C118.051 175.386 122.852 173.35 123.176 173.749C123.592 174.009 119.014 176.888 118.6 176.366ZM108.977 171.824C109.69 171.533 111.351 172.629 110.777 173.055C109.38 173.309 108.404 172.191 108.977 171.824ZM122.237 171.9C123.501 171.646 123.631 172.329 123.293 172.708C123.001 173.225 121.773 172.282 122.237 171.9ZM117.511 120.584C118.579 119.352 121.362 118.796 122.002 120.127C122.72 121.301 123.572 122.342 125.41 122.414C126.341 122.291 126.214 126.582 125.72 127.75C123.734 130.989 125.606 133.109 126.649 134.304C127.81 135.778 129.156 136.889 130.521 137.963C131.762 139.144 132.723 138.12 133.774 137.81C135.366 137.262 135.379 138.99 135.323 140.25C135.461 142.53 136.314 145.202 135.632 147.109C135.401 147.752 134.221 148.267 135.323 149.091C136.413 150.061 135.692 150.655 134.858 151.225C132.862 152.458 131.435 154.313 130.367 156.561C129.478 158.074 128.363 159.366 126.958 160.372C125.314 161.235 124.013 162.1 122.777 162.963C120.929 164.635 118.92 167.962 117.356 170.89C117.609 168.703 117.792 166.481 118.44 164.488L120.918 157.475C122.171 154.375 122.245 152.867 120.609 152.75C118.616 152.341 118.3 153.52 117.401 153.611C115.752 153.769 114.617 154.116 113.793 154.579L105.74 159.457C104.86 159.862 103.856 161.208 103.262 159.457C102.913 158.657 99.971 161.179 100.474 159.915C101.165 158.264 101.617 156.639 100.474 155.189C99.4238 153.263 100.084 152.697 101.713 152.902L104.965 147.262L106.824 139.182C107.57 137.135 108.041 135.142 105.74 133.695L100.319 130.341C98.8883 128.597 100.109 127.795 100.939 126.834C103.392 123.44 106.571 123.148 109.612 122.261C111.41 121.708 113.338 121.8 115.342 122.261C116.04 122.633 116.27 122.159 116.314 121.51C116.895 121.381 117.438 121.213 117.511 120.584ZM124.583 167.55C123.831 166.64 125.576 165.054 126.461 165.548C127.127 165.959 125.934 168.712 124.583 167.55ZM107.133 103.207C108.006 101.611 110.185 103.175 111.161 103.968C112.93 104.97 112.195 108.057 113.329 110.066C114.062 111.5 113.701 113.002 113.329 114.639C113.132 117.203 111.82 120.243 110.696 119.518C109.437 118.712 107.826 118.146 107.443 118.908C106.401 121.033 102.592 120.053 100.473 121.5C99.4115 122.771 97.9066 122.514 96.4468 122.414C95.9328 122.109 98.654 121.804 99.0796 119.67C99.6773 118.994 99.9185 118.418 99.0796 118.146C98.8073 117.622 99.7835 117.1 99.0796 116.774C97.8967 115.848 96.8416 114.898 97.686 113.573C98.099 112.76 97.8919 112.15 97.0659 111.744C95.7449 111.041 94.4215 110.343 93.5034 108.847C95.2628 106.927 97.6834 105.739 101.093 105.646C102.29 105.627 103.63 102.66 104.81 103.511C105.584 105.441 106.359 104.234 107.133 103.207ZM1.03857 82.9321C4.5064 83.1916 4.93121 85.0985 4.2915 87.5815C3.77248 88.408 3.18856 89.2534 4.67822 89.4868C7.43497 90.1318 6.38078 91.3617 5.53076 92.9927C4.6186 93.7252 6.63798 94.7958 5.22021 98.7856C5.4095 99.5815 5.63189 100.313 6.22705 100.31C7.41224 100.683 7.85064 101.644 8.0083 102.826C8.22476 103.803 8.31642 104.872 9.32471 105.264C10.5448 105.684 12.8612 106.777 11.106 108.618C10.5305 109.187 11.0146 111.734 11.4937 113.42C12.0702 114.253 12.1499 114.923 12.1128 115.554C12.4876 117.244 11.0798 117.103 10.0991 117.764C9.5045 118.062 9.64687 116.683 9.7876 116.117C9.30896 115.635 9.34596 115.069 9.47998 114.487C9.03625 113.626 8.52199 112.799 8.47314 111.744C7.76138 109.234 6.28983 105.277 5.29834 105.493C3.71909 105.784 2.28351 104.845 2.66553 103.816C3.50855 102.144 3.41918 100.407 2.81982 98.6333C2.50951 97.4518 2.5695 96.3613 2.66553 95.2798C2.71681 93.6513 1.64693 91.5875 0.884277 89.7915C0.241828 88.8527 -0.473985 87.9991 0.419434 86.6665C2.68842 85.7958 0.299394 82.8459 1.03857 82.9321ZM153.293 95.022C152.148 93.0923 153.174 89.5012 155.64 91.9419L157.987 94.7144C159.351 96.1079 156.315 99.1757 155.328 97.7935L153.293 95.022ZM172.538 87.4761C172.771 86.9355 175.107 87.5857 175.159 88.5933C175.225 89.0691 175.091 89.3089 175.12 89.7095C174.396 92.2256 174.637 88.9046 174.141 88.939C172.913 88.9564 172.309 88.3806 172.538 87.4761ZM104.52 87.8101C105.327 87.2764 107.228 86.9417 107.056 87.353C106.223 88.3752 102.952 89.4971 102.758 88.9917C102.542 88.4478 103.691 87.8334 104.52 87.8101ZM100.048 87.4292C101.37 87.0602 101.533 88.0919 101.209 88.686C101.127 89.1487 99.508 87.7704 100.048 87.4292ZM172.068 80.7778C174.403 79.0735 174.77 81.2604 175.432 82.2407C179.738 81.5566 180.402 82.3067 180.595 83.2417C180.611 84.2425 179.738 85.3541 176.762 83.7808C176.025 83.0435 174.895 82.5537 173.907 82.9341L168.861 87.3228C168.12 88.4461 165.222 86.8522 166.514 85.3208L172.068 80.7778ZM106.166 85.4282C107.056 84.5067 108.221 85.9261 107.986 86.2476C107.779 86.6515 105.93 85.8166 106.166 85.4282ZM102.623 85.7329C103.069 85.5081 103.371 86.0136 103.087 86.1714C102.579 86.4805 102.07 86.3631 102.623 85.7329ZM174.18 83.5493C174.711 83.2198 175.464 84.1384 175.12 84.4731C174.729 84.8388 173.926 83.7611 174.18 83.5493ZM99.6997 81.9956C99.3299 81.4492 100.777 81.3238 101.137 82.104C101.709 82.9157 103.526 81.0059 103.184 81.9409C101.623 84.8118 100.692 83.1872 99.6997 81.9956ZM94.4995 79.3276C95.7922 79.2901 98.4765 80.1687 98.4272 81.1792C98.3442 82.8803 98.0808 83.5472 93.7251 83.3022C92.6383 83.24 91.1671 79.423 94.4995 79.3276ZM181.729 80.9321C182.206 81.4861 182.113 82.784 180.712 82.7026C180.575 81.6958 180.928 81.118 181.729 80.9321ZM91.9868 11.3911C95.3705 11.1801 91.9085 13.8253 91.6577 15.0562C91.5758 15.8751 93.3395 16.6174 94.6694 16.9966C95.9876 17.1955 95.6789 18.85 95.436 20.4458C97.4781 21.6866 97.7774 22.7953 97.9556 23.895C98.543 27.5959 99.7628 26.1623 100.913 25.2964C102.03 23.9551 103.784 23.4896 105.622 23.1401C107.82 24.2644 105.455 26.818 104.746 28.853C107.59 28.2014 108.127 29.6586 109.016 30.7935C109.737 32.1024 109.584 34.0572 109.784 35.7515C110.151 37.0495 112.626 34.0885 112.193 32.5181C111.31 29.7282 111.675 27.4645 111.754 25.0806L112.083 21.3081C110.828 19.5038 111.333 16.7637 113.288 18.6128C113.096 17.7255 113.775 17.1803 114.274 16.5649L113.945 14.1938C112.28 12.2636 114.223 12.1732 116.026 13.2231C116.965 13.664 118.253 14.5706 117.998 15.3794C117.565 16.7077 116.734 18.1264 118.107 19.0444C119.57 20.2788 119.851 21.6189 118.107 23.1401C116.758 24.3525 115.572 26.9813 117.231 29.1763C117.71 29.6971 119.197 28.0088 120.407 27.6675C122.821 27.6902 123.043 26.0099 122.707 23.895C122.407 21.8321 124.236 21.6327 126.54 21.8472L127.197 19.6909C126.122 19.5224 123.891 19.4029 124.349 18.7212C124.93 17.2736 126.633 17.7902 128.511 18.6128C129.054 18.9542 127.308 20.0502 127.306 21.7925L129.606 21.6313C131.54 19.6626 130.703 18.2385 130.591 16.6724C131.543 18.1796 132.382 19.702 130.044 21.6313C131.726 20.5526 132.168 21.6437 132.563 22.8169C133.421 21.6197 134.859 22.5602 136.287 23.4634C138.436 24.7833 140.021 24.9929 141.763 25.5112L151.072 25.7271C155.385 26.3985 153.883 27.7439 153.481 28.9614C152.678 30.183 152.752 31.6916 153.701 33.4878C154.731 35.793 154.348 38.2253 152.167 40.8179C148.564 42.8097 148.856 47.2657 144.72 49.4419C143.616 50.5825 143.831 53.0223 143.843 55.2622C143.963 59.6151 143.693 63.7554 141.215 66.688C139.536 69.3708 137.857 68.5273 136.177 67.5503C134.753 65.5084 131.647 66.5595 131.359 68.4126C129.213 74.1951 126.348 75.9167 123.035 75.0962C116.635 73.4669 115.503 70.7541 116.902 66.0415C117.452 64.8619 117.407 62.6941 115.587 64.7476C114.391 66.2456 112.765 66.4745 110.988 66.2573L107.264 66.0415C105.266 65.9009 103.353 65.9006 101.789 66.4722C99.1287 67.8441 98.8997 66.9731 98.5024 66.2573C98.0857 64.7438 96.4182 64.3379 94.5601 64.1011C90.153 63.0166 89.6144 59.3936 89.522 55.478C90.0033 52.6142 92.7437 54.5226 94.3413 56.3403C95.8244 57.1612 97.386 57.5958 99.1597 56.9868C99.8898 58.1757 100.62 57.6307 101.35 56.9868C98.1673 55.2431 98.1004 54.0105 97.4077 52.6753C97.2991 49.8555 101.694 50.5182 105.512 50.7349C106.958 49.8737 110.307 47.9012 109.673 47.7163C108.629 47.4508 107.535 47.234 107.483 45.9917C107.263 44.175 104.416 44.8309 102.883 45.9917C101.879 46.9488 96.4926 47.0394 93.0269 46.854C90.9753 48.9498 88.3556 49.704 85.5796 50.0884C84.6304 49.5258 83.6811 50.0632 82.7319 50.3042C81.1382 50.8343 79.6612 50.8134 78.7896 47.9321C78.2925 46.3026 77.6036 44.7484 76.3804 43.4048C74.9132 41.9546 75.6593 39.7266 76.1606 37.5845C77.7356 39.1709 78.6486 37.8234 79.6655 36.938C81.4492 35.7338 81.9361 34.7704 78.3511 34.5659C75.9199 34.1072 73.7035 32.9307 71.9995 30.0386C71.0227 27.93 74.0012 25.3222 75.7231 26.3745C77.6688 27.4403 78.7275 27.009 79.6655 26.3745C80.5584 25.6018 82.1473 26.2533 82.0747 27.2368C82.2938 30.3984 83.6815 31.4041 86.2368 30.2544C87.9613 29.126 85.1962 27.0731 83.6626 25.4038C82.7771 23.5858 82.1795 21.8767 83.1704 20.769C84.5188 18.9478 85.5716 21.2193 85.7983 22.2778C86.2604 24.7457 87.7985 25.0968 89.0845 25.9429C88.6001 23.5352 89.2449 21.7626 89.7417 19.9067C90.256 18.0959 89.7269 16.9096 86.894 17.104C85.8596 16.9097 86.5423 13.4628 89.522 13.0083C90.3434 13.4418 91.1654 13.6154 91.9868 13.3315C89.0177 11.6927 91.4883 11.3174 91.9868 11.3911ZM90.5171 70.8345C90.2611 69.8034 92.1772 71.1285 93.0063 71.5425C93.6107 71.8302 93.9667 72.4659 92.4526 73.0122C91.5901 73.4355 90.7978 73.4893 90.5171 70.8345ZM100.75 70.5083C101.268 69.5841 102.263 70.3725 102.174 71.2153C102.048 71.7821 100.491 71.4424 100.75 70.5083ZM88.896 69.8794C89.4387 69.8593 88.6836 71.3546 88.4312 71.0981C88.1419 70.8882 88.1385 69.7321 88.896 69.8794ZM86.437 69.8599C86.3172 69.126 86.4556 68.5997 87.4634 68.7739C87.7584 68.7041 87.6045 69.2054 87.231 69.5356C86.5299 70.5744 86.5488 70.0777 86.437 69.8599ZM96.3247 68.9292C95.5467 68.5382 96.6974 66.7257 97.4585 66.9692C97.9209 67.0417 97.2135 69.357 96.3247 68.9292ZM87.6401 67.187C87.5469 65.8752 92.167 65.8957 91.8442 67.2954C91.9237 68.8763 87.6254 68.508 87.6401 67.187ZM86.5894 63.3755C88.2547 63.1704 89.2178 63.5072 88.0278 64.3013C86.8584 65.098 86.1132 63.5049 86.5894 63.3755ZM10.0884 44.811C13.4614 44.8832 13.114 47.3773 12.356 47.0425C11.5379 46.9038 10.7597 47.0415 10.0884 47.9136C9.56141 48.285 9.04928 44.6753 10.0884 44.811ZM10.3101 40.02C10.9837 39.9796 12.2973 44.4442 10.2544 42.9058C8.93082 41.8423 9.52809 40.2917 10.3101 40.02ZM157.752 23.5718C159.158 23.0377 159.917 23.3923 160.491 24.4956C161.103 25.7263 158.311 28.3698 157.205 27.3442C156.174 25.7612 156.49 24.5394 157.752 23.5718ZM76.2397 22.3394C74.433 21.1531 76.7943 18.2648 78.1948 19.2593L79.7593 20.645C81.005 22.0233 78.829 25.0785 77.1782 23.3403L76.2397 22.3394ZM196.568 12.0688C197.931 10.4364 200.925 13.6238 199.444 14.8999C196.427 17.1967 193.684 19.8982 191.257 23.0659C190.942 23.6903 183.856 23.514 183.905 22.3091C184.964 20.1776 186.22 19.068 189.044 18.3843C192.328 16.47 194.434 14.2658 196.568 12.0688ZM125.642 13.7515C126.186 13.6492 126.043 16.8636 125.254 16.5278C124.066 16.2657 125.081 13.7012 125.642 13.7515ZM136.044 13.9087C135.536 13.0031 137.545 11.8943 137.921 12.5229C138.7 13.5094 136.209 14.2832 136.044 13.9087ZM123.263 12.4722C123.34 11.1156 124.515 11.0323 124.923 11.2739C125.531 11.4 126.491 12.2041 124.868 12.5259C124.457 12.6538 123.532 13.1138 123.263 12.4722ZM138.978 12.2534C138.142 10.4181 140.272 10.0006 140.621 10.6362C141.895 11.9145 139.722 12.9914 138.978 12.2534ZM136.435 11.0601C136.048 10.5312 136.76 9.8086 137.217 10.1743C137.593 10.3704 137.045 11.5415 136.435 11.0601ZM96.5786 3.70654C97.3297 3.91281 96.513 5.84655 95.9526 5.47803C95.3717 5.21659 95.3865 3.65151 96.5786 3.70654ZM99.6294 4.5542C99.0487 3.19977 101.724 1.90642 102.524 2.62939C103.193 3.41686 100.705 5.40751 99.6294 4.5542ZM96.1089 0.165527C97.1151 -0.627053 99.2725 1.6258 98.2993 2.70557C97.4723 3.36916 95.2519 1.06248 96.1089 0.165527Z" fill="url(#blueGradient)" />
                      </svg>
                      <span className='collection-name'>Svalbard</span>
                      <h1 id='collection' className='collection-title'>Collection</h1>
                    </div>
                  </div>
                  <span className='date'>NOV 1, 2025</span>
                </>
              )}
            </div>
          </motion.div>
          <motion.div
            className='gallery-grid'
            layout
            style={{ opacity: selectedPhotoId ? '0' : '1' }}
          >
            <AnimatePresence mode="popLayout">
              {visiblePhotos.map((id) => (
                <motion.div
                  key={id}
                  layout
                  layoutId={`photo-${id}`}
                  initial={{ opacity: 0, scale: 0.8 }}
                  animate={{ opacity: 1, scale: 1 }}
                  exit={{ opacity: 0, scale: 0.8 }}
                  transition={{
                    layout: { duration: 0.3, ease: "easeInOut" },
                    opacity: { duration: 0.2 },
                    scale: { duration: 0.2 }
                  }}
                  style={{ overflow: 'hidden', borderRadius: '1rem', aspectRatio: '1/1', position: 'relative' }}
                  className='img-container'
                >
                  {loadedImages.has(id) ? (
                    <button
                      onClick={(e) => {
                        const button = e.currentTarget;
                        const container = button.closest('.img-container');
                        if (container) container.classList.add('elevated');

                        const url = new URL(window.location.origin);
                        url.searchParams.set('photo', id);
                        window.history.pushState({}, '', url);
                        window.dispatchEvent(new PopStateEvent('popstate'));
                      }}
                      style={{ all: 'unset', cursor: 'pointer' }}
                    >
                      <GalleryImage id={id} />
                    </button>
                  ) : (
                    <>
                      {failedImages.has(id) ? (
                        <button
                          onClick={retryUnloadedImages}
                          className='retry-button'
                        >
                          <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '.25rem', color: 'white', opacity: '.8', zIndex: '2' }}>
                            <span style={{ fontSize: '1.5rem', fontWeight: '600' }}>RETRY</span>
                            <svg className='icons' xmlns="http://www.w3.org/2000/svg" width="18" height="21" viewBox="0 0 18 21" fill="none">
                              <path d="M17.5 10.5041C17.5 11.5465 17.3218 12.5343 16.9654 13.4675C16.609 14.3953 16.1101 15.2331 15.4686 15.9807C14.8325 16.723 14.0868 17.3397 13.2315 17.8308C12.3761 18.322 11.4468 18.6549 10.4434 18.8296V19.8938C10.4434 20.1012 10.3995 20.254 10.3118 20.3522C10.2241 20.4559 10.1089 20.505 9.96638 20.4996C9.8293 20.4996 9.684 20.4423 9.53048 20.3277L6.87397 18.4366C6.68755 18.3002 6.59434 18.1419 6.59434 17.9618C6.59982 17.7817 6.69303 17.6262 6.87397 17.4952L9.5387 15.596C9.68674 15.4868 9.8293 15.4323 9.96638 15.4323C10.1089 15.4268 10.2241 15.4759 10.3118 15.5796C10.3995 15.6778 10.4434 15.8279 10.4434 16.0299V17.1186C11.211 16.9549 11.9211 16.6738 12.5735 16.2754C13.2315 15.8716 13.8017 15.3777 14.2842 14.7937C14.7667 14.2043 15.1423 13.5467 15.411 12.8208C15.6796 12.0895 15.814 11.3173 15.814 10.5041C15.814 9.55994 15.6303 8.67581 15.2629 7.85172C14.8956 7.02218 14.3966 6.30178 13.7661 5.69054C13.5632 5.47769 13.4673 5.26758 13.4782 5.06019C13.4892 4.8528 13.5577 4.67543 13.6838 4.52808C13.8319 4.36435 14.0293 4.27157 14.276 4.24974C14.5227 4.22791 14.7475 4.32342 14.9504 4.53627C15.7345 5.28941 16.3541 6.18172 16.8091 7.21319C17.2697 8.23921 17.5 9.33618 17.5 10.5041ZM0.5 10.5041C0.5 9.4617 0.675456 8.47661 1.02637 7.54883C1.38276 6.61559 1.88171 5.77786 2.52322 5.03563C3.16473 4.28795 3.91042 3.66852 4.76028 3.17734C5.61563 2.6807 6.54499 2.34779 7.54838 2.17861V1.1062C7.54838 0.89881 7.59224 0.745999 7.67997 0.647763C7.77318 0.54407 7.88832 0.494952 8.0254 0.500409C8.16247 0.500409 8.31051 0.557714 8.46952 0.672322L11.126 2.57155C11.307 2.70799 11.3974 2.86626 11.3974 3.04636C11.3974 3.22645 11.307 3.38199 11.126 3.51298L8.4613 5.4122C8.30777 5.52135 8.16247 5.57866 8.0254 5.58411C7.88832 5.58411 7.77318 5.535 7.67997 5.43676C7.59224 5.33307 7.54838 5.18026 7.54838 4.97833V3.88955C6.78076 4.05327 6.07071 4.33706 5.41824 4.74092C4.76576 5.13932 4.19553 5.63323 3.70755 6.22265C3.22504 6.8066 2.84946 7.46424 2.58079 8.19555C2.31213 8.9214 2.17779 9.69092 2.17779 10.5041C2.17779 11.4482 2.36147 12.3351 2.72883 13.1646C3.10168 13.9887 3.60611 14.7037 4.24214 15.3095C4.43953 15.5278 4.53274 15.7406 4.52177 15.948C4.5108 16.1554 4.44227 16.33 4.31616 16.4719C4.16264 16.6356 3.96251 16.7284 3.71577 16.7503C3.46904 16.7775 3.24698 16.6848 3.04959 16.4719C2.26004 15.7188 1.63772 14.8292 1.18263 13.8032C0.727544 12.7717 0.5 11.672 0.5 10.5041Z" fill="white" />
                            </svg>
                          </div>
                          <GallerySkeleton animate={false} />
                        </button>
                      ) : (
                        <GallerySkeleton animate={true} />
                      )}
                    </>
                  )}
                </motion.div>
              ))}
            </AnimatePresence>
          </motion.div>
          {hasMore && (
            <div ref={observerRef} style={{ height: '1px', transform: 'translateY(-10rem)' }} />
          )}
          <div style={{ height: '3rem' }}></div>
          {selectedPhotoId && (
            <AnimatePresence mode="wait">
              <ImageDetailView
                id={selectedPhotoId}
              />
            </AnimatePresence>
          )}
        </motion.div>
      </AnimatePresence>
    </>
  );
}